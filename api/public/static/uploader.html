<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="uploader.css" />

    <title>Upload multiple files</title>
  </head>

  <body>
    <form>
      <div class="drop-area">
        <p class="instructions">Drag Files Here</p>
        <input
          type="file"
          class="upload-button"
          name="name"
          multiple
        /><br /><br />
      </div>

      <div>
        <select name="upload-categories" class="upload-categories">
          <option hidden> </option>

          <option value="landscape"> Landscape </option>
          <option value="urban"> Urban </option>
          <option value="pastel"> Pastel </option>
          <option value="travel"> Travel </option>
        </select>
      </div>
      After uploading multiple files, click Submit.<br />
      <div class="submit-wrapper">
        <input class="submit-button" type="submit" value="Submit" />
      </div>
    </form>
  </body>
</html>
<script>
  let formGenre;
  {% comment %} let formData = new FormData(); //do I even need formData? {% endcomment %}

  function readFileAsText(file) {}
  const genre = document.querySelector(".upload-categories");
  genre.addEventListener("change", function() {
    formGenre = this.value;
  });

  const uploaderButton = document.querySelector(".upload-button");
  uploaderButton.addEventListener("change", (event) => {
    let files = event.currentTarget.files;
    let fileArray = [];
    let photoObject = [];
    if (!files.length) return;

    for (let i = 0; i < files.length; i++) {
      fileArray.push(URL.createObjectURL(files[i]));
    }
    fileArray.forEach((blob) => {
      photoObject.push({ src: blob });
      //call uploadFile here, and pass in formGenre as the foldername!
    });
  });
</script>
